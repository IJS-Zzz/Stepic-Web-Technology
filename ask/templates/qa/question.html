{% extends "qa/base.html" %}

{% block content %}
  <h1>{{ question }}</h1>
  <div>{{ question.text }}, {{ question.author }}</div>
  <hr>
  <ul>
  {% for answer in question.answer_set.all %}
      <li>{{ answer }}, {{ answer.author }}</li>
  {% endfor %}
  </ul>
  <hr>
  <form method="post" action="{{ question.get_absolute_url }}" autocomplete="off">
    <fieldset>
      {% csrf_token %}
      {{ form.as_p }}
    </fieldset>
    <button type="submit">Ответить</button>
  </form>
{% endblock %}


<!--   {% for e in form.non_field_errors %}
    <div class="alert alert-danger">{{ e }}</div>
  {% endfor %}
  {% if form_posted %}
    <div class="alert alert-success">Well Done! Answer added!</div>
  {% endif %}
  <div class="mt-3">
    <div class="card m-2">
        <div class="card-body">
          <h4>{{ question.title }}</h4>
          <p>{{ question.text }}</p>
        </div>
    </div>
    
    <form method="post" action="" autocomplete="off">
      {% csrf_token %}
      <input type="hidden" name="question" value="{{ question.id }}">
      {{ form.question.errors }}

      <label for="{{ form.text.id_for_label }}">Your answer:</label>
      <div>{{ form.text }}</div>
      <div>{{ form.text.errors }}</div>

      <button class="btn btn-primary" type="submit">Submit form</button>
    </form>

    {% if answers %}
      <h6>Answers:</h6>
      {% for a in answers %}
        <div class="card m-2">
          <div class="card-body">
            <h6>{{ a.author }}</h4>
            <p>{{ a.text }}</p>
          </div>
        </div>
      {% endfor %}
    {% endif %}

  </div> -->